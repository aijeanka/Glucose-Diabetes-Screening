<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aizhan Uteubayeva (NetID:au198)">

<title>Homework 1: Abnormal Blood Glucose and Type 2 Diabetes Mellitus Screening</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="HW1_Aizhan_Uteubayeva_files/libs/clipboard/clipboard.min.js"></script>
<script src="HW1_Aizhan_Uteubayeva_files/libs/quarto-html/quarto.js"></script>
<script src="HW1_Aizhan_Uteubayeva_files/libs/quarto-html/popper.min.js"></script>
<script src="HW1_Aizhan_Uteubayeva_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="HW1_Aizhan_Uteubayeva_files/libs/quarto-html/anchor.min.js"></script>
<link href="HW1_Aizhan_Uteubayeva_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="HW1_Aizhan_Uteubayeva_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="HW1_Aizhan_Uteubayeva_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="HW1_Aizhan_Uteubayeva_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="HW1_Aizhan_Uteubayeva_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Homework 1: Abnormal Blood Glucose and Type 2 Diabetes Mellitus Screening</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Aizhan Uteubayeva (NetID:au198) </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="data-acquisition" class="level2">
<h2 class="anchored" data-anchor-id="data-acquisition">Data acquisition</h2>
<section id="looking-at-all-bmi-patients" class="level3">
<h3 class="anchored" data-anchor-id="looking-at-all-bmi-patients">1) Looking at all BMI patients</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> P.<span class="kw">id</span> <span class="kw">AS</span> patient_id</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> patient P</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> bmi B <span class="kw">ON</span> P.<span class="kw">id</span> <span class="op">=</span> B.patient;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">patient_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0001049f-9248-47fe-b479-ea80eb51ce4a</td>
</tr>
<tr class="even">
<td style="text-align: left;">0001054e-77c4-4e09-8310-7e5b1a579d8a</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00019dce-e502-4272-82d2-d1c280f74150</td>
</tr>
<tr class="even">
<td style="text-align: left;">0001ae39-67c6-443c-81e4-e835ab4f6a9b</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0002760d-9404-43cb-873f-26b0a59d3a55</td>
</tr>
<tr class="even">
<td style="text-align: left;">00037885-87aa-4086-aa89-f56ddf5d30e0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00039f5a-cfff-4bd4-9a0b-1768734ec059</td>
</tr>
<tr class="even">
<td style="text-align: left;">00050455-3247-450f-899e-709079405df8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0005ac2e-1174-4e89-8422-7783e5693d31</td>
</tr>
<tr class="even">
<td style="text-align: left;">0005e00b-3a5a-41fa-98f9-64d3c97277f2</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="adding-the-age-column" class="level4">
<h4 class="anchored" data-anchor-id="adding-the-age-column">Adding the “age” column</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- selecting all and storing in a new table with age column</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TEMPORARY</span> <span class="kw">TABLE</span> temp_result_age <span class="kw">AS</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    P.<span class="kw">id</span> <span class="kw">AS</span> patient_id,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    P.birthdate,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    P.deathdate,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    P.race,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    P.ethnicity,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    P.gender,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    B.<span class="fu">value</span> <span class="kw">AS</span> bmi_value,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Calculate age based on birthdate and deathdate</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> P.deathdate <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="cf">THEN</span> </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">EXTRACT</span>(<span class="dt">YEAR</span> <span class="kw">FROM</span> AGE(P.deathdate, P.birthdate))</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">ELSE</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">EXTRACT</span>(<span class="dt">YEAR</span> <span class="kw">FROM</span> AGE(<span class="fu">CURRENT_DATE</span>, P.birthdate))</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">END</span> <span class="kw">AS</span> age</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> patient P</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> bmi B <span class="kw">ON</span> P.<span class="kw">id</span> <span class="op">=</span> B.patient</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> conditions C <span class="kw">ON</span> P.<span class="kw">id</span> <span class="op">=</span> C.patient;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- selecting all and storing in a new table</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> temp_result_age;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 37%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 6%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">patient_id</th>
<th style="text-align: left;">birthdate</th>
<th style="text-align: left;">deathdate</th>
<th style="text-align: left;">race</th>
<th style="text-align: left;">ethnicity</th>
<th style="text-align: left;">gender</th>
<th style="text-align: left;">bmi_value</th>
<th style="text-align: right;">age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0001049f-9248-47fe-b479-ea80eb51ce4a</td>
<td style="text-align: left;">1958-12-02</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">27.6</td>
<td style="text-align: right;">65</td>
</tr>
<tr class="even">
<td style="text-align: left;">0001054e-77c4-4e09-8310-7e5b1a579d8a</td>
<td style="text-align: left;">1945-10-02</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">30.5</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00019dce-e502-4272-82d2-d1c280f74150</td>
<td style="text-align: left;">1968-04-20</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">29.4</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">0001ae39-67c6-443c-81e4-e835ab4f6a9b</td>
<td style="text-align: left;">1914-07-28</td>
<td style="text-align: left;">1956-01-31</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">29.2</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0002760d-9404-43cb-873f-26b0a59d3a55</td>
<td style="text-align: left;">1988-08-09</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">29.8</td>
<td style="text-align: right;">35</td>
</tr>
<tr class="even">
<td style="text-align: left;">00037885-87aa-4086-aa89-f56ddf5d30e0</td>
<td style="text-align: left;">1958-07-25</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">30.2</td>
<td style="text-align: right;">65</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00039f5a-cfff-4bd4-9a0b-1768734ec059</td>
<td style="text-align: left;">2017-03-27</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">17.8</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">00039f5a-cfff-4bd4-9a0b-1768734ec059</td>
<td style="text-align: left;">2017-03-27</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">17.9</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00050455-3247-450f-899e-709079405df8</td>
<td style="text-align: left;">1972-12-22</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">22.4</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="even">
<td style="text-align: left;">0005e00b-3a5a-41fa-98f9-64d3c97277f2</td>
<td style="text-align: left;">1911-12-07</td>
<td style="text-align: left;">1930-04-17</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">24.0</td>
<td style="text-align: right;">18</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="exclusion-criteria" class="level3">
<h3 class="anchored" data-anchor-id="exclusion-criteria">2) Exclusion criteria</h3>
<p>Verifying the presence of “pregnancy” using the conditions table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> patient</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> conditions</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="fu">LOWER</span>(description) <span class="kw">LIKE</span> <span class="st">'%pregnancy%'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">patient</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0002760d-9404-43cb-873f-26b0a59d3a55</td>
</tr>
<tr class="even">
<td style="text-align: left;">00034773-ca66-4191-8f43-56a9c20f8abf</td>
</tr>
<tr class="odd">
<td style="text-align: left;">000edc09-fcfa-4978-bb34-463db6887f62</td>
</tr>
<tr class="even">
<td style="text-align: left;">0013827d-44b8-442a-9ac9-8f4b245e1492</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0013c03d-4bde-4c5b-abf5-08e505002e80</td>
</tr>
<tr class="even">
<td style="text-align: left;">001a2ed3-3209-4535-bc9c-c286a8b94596</td>
</tr>
<tr class="odd">
<td style="text-align: left;">001d553b-0490-4874-beb2-68499b148560</td>
</tr>
<tr class="even">
<td style="text-align: left;">002bf1e6-e498-4045-8ca6-df2462de2cb0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0034224d-ff47-4cc3-8c9c-3f01de6582c8</td>
</tr>
<tr class="even">
<td style="text-align: left;">00344492-27ff-476c-9001-808f12e0819c</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> patient</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> conditions</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="fu">LOWER</span>(description) <span class="kw">LIKE</span> <span class="st">'%pregnancy%'</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">AND</span> (</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">stop</span> <span class="kw">IS</span> <span class="kw">NULL</span> <span class="kw">AND</span> <span class="kw">start</span> <span class="op">&gt;=</span> <span class="fu">CURRENT_DATE</span> <span class="op">-</span> <span class="dt">INTERVAL</span> <span class="st">'1 year'</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">OR</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">stop</span> <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">AND</span> <span class="kw">stop</span> <span class="op">&gt;=</span> <span class="fu">CURRENT_DATE</span> <span class="op">-</span> <span class="dt">INTERVAL</span> <span class="st">'1 year'</span> <span class="kw">AND</span> <span class="kw">stop</span> <span class="op">&lt;=</span> <span class="st">'2020-05-17'</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  );</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">patient</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">77ca7263-9596-4b24-b6d2-d1360f64e632</td>
</tr>
<tr class="even">
<td style="text-align: left;">8e576307-ca1b-486e-bd3f-8fa6c292b7f9</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>It appears that there are only records for two patients with evidence of pregnancy within the last year. This observation is based on the latest recorded information in Synthea, dated 2020-05-17, which has been taken into account for the analysis.</p>
<section id="removing-pregnant-patients" class="level4">
<h4 class="anchored" data-anchor-id="removing-pregnant-patients">Removing pregnant patients</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- creating a new table with no pregnant patients</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TEMPORARY</span> <span class="kw">TABLE</span> temp_result_no_pregnancy <span class="kw">AS</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    P.<span class="kw">id</span> <span class="kw">AS</span> patient_id,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    P.birthdate,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    P.deathdate,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    P.race,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    P.ethnicity,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    P.gender,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    B.<span class="fu">value</span> <span class="kw">AS</span> bmi_value,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- calculating age based on birthdate and deathdate</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> P.deathdate <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="cf">THEN</span> </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">EXTRACT</span>(<span class="dt">YEAR</span> <span class="kw">FROM</span> AGE(P.deathdate, P.birthdate))</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">ELSE</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">EXTRACT</span>(<span class="dt">YEAR</span> <span class="kw">FROM</span> AGE(<span class="fu">CURRENT_DATE</span>, P.birthdate))</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">END</span> <span class="kw">AS</span> age</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> patient P</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> bmi B <span class="kw">ON</span> P.<span class="kw">id</span> <span class="op">=</span> B.patient</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> conditions C <span class="kw">ON</span> P.<span class="kw">id</span> <span class="op">=</span> C.patient</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> (</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="dv">1</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> conditions</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> <span class="fu">LOWER</span>(description) <span class="kw">LIKE</span> <span class="st">'%pregnancy%'</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>      <span class="kw">AND</span> P.<span class="kw">id</span> <span class="op">=</span> patient</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>      <span class="kw">AND</span> (</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">stop</span> <span class="kw">IS</span> <span class="kw">NULL</span> <span class="kw">AND</span> <span class="kw">start</span> <span class="op">&gt;=</span> <span class="fu">CURRENT_DATE</span> <span class="op">-</span> <span class="dt">INTERVAL</span> <span class="st">'1 year'</span>)</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="kw">OR</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">stop</span> <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">AND</span> <span class="kw">stop</span> <span class="op">&gt;=</span> <span class="fu">CURRENT_DATE</span> <span class="op">-</span> <span class="dt">INTERVAL</span> <span class="st">'1 year'</span> <span class="kw">AND</span> <span class="kw">stop</span> <span class="op">&lt;=</span> <span class="st">'2020-05-17'</span>)</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> temp_result_no_pregnancy;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 37%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 6%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">patient_id</th>
<th style="text-align: left;">birthdate</th>
<th style="text-align: left;">deathdate</th>
<th style="text-align: left;">race</th>
<th style="text-align: left;">ethnicity</th>
<th style="text-align: left;">gender</th>
<th style="text-align: left;">bmi_value</th>
<th style="text-align: right;">age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0001049f-9248-47fe-b479-ea80eb51ce4a</td>
<td style="text-align: left;">1958-12-02</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">27.6</td>
<td style="text-align: right;">65</td>
</tr>
<tr class="even">
<td style="text-align: left;">0001054e-77c4-4e09-8310-7e5b1a579d8a</td>
<td style="text-align: left;">1945-10-02</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">30.5</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00019dce-e502-4272-82d2-d1c280f74150</td>
<td style="text-align: left;">1968-04-20</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">29.4</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">0001ae39-67c6-443c-81e4-e835ab4f6a9b</td>
<td style="text-align: left;">1914-07-28</td>
<td style="text-align: left;">1956-01-31</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">29.2</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0002760d-9404-43cb-873f-26b0a59d3a55</td>
<td style="text-align: left;">1988-08-09</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">29.8</td>
<td style="text-align: right;">35</td>
</tr>
<tr class="even">
<td style="text-align: left;">00037885-87aa-4086-aa89-f56ddf5d30e0</td>
<td style="text-align: left;">1958-07-25</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">30.2</td>
<td style="text-align: right;">65</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00039f5a-cfff-4bd4-9a0b-1768734ec059</td>
<td style="text-align: left;">2017-03-27</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">17.8</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">00039f5a-cfff-4bd4-9a0b-1768734ec059</td>
<td style="text-align: left;">2017-03-27</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">17.9</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00050455-3247-450f-899e-709079405df8</td>
<td style="text-align: left;">1972-12-22</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">22.4</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="even">
<td style="text-align: left;">0005e00b-3a5a-41fa-98f9-64d3c97277f2</td>
<td style="text-align: left;">1911-12-07</td>
<td style="text-align: left;">1930-04-17</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">24.0</td>
<td style="text-align: right;">18</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="inlcusion-criteria" class="level3">
<h3 class="anchored" data-anchor-id="inlcusion-criteria">3) Inlcusion criteria</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TEMPORARY</span> <span class="kw">TABLE</span> temp_result_criteria <span class="kw">AS</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> temp_result_no_pregnancy</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- adding the age and bmi_value criteria</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    (</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        (age <span class="kw">BETWEEN</span> <span class="dv">40</span> <span class="kw">AND</span> <span class="dv">70</span> <span class="kw">AND</span> <span class="fu">CAST</span>(bmi_value <span class="kw">AS</span> <span class="dt">numeric</span>) <span class="op">&gt;=</span> <span class="dv">25</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">OR</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>            age <span class="kw">BETWEEN</span> <span class="dv">18</span> <span class="kw">AND</span> <span class="dv">39</span> <span class="kw">AND</span> <span class="fu">CAST</span>(bmi_value <span class="kw">AS</span> <span class="dt">numeric</span>) <span class="op">&gt;=</span> <span class="dv">25</span> <span class="kw">AND</span> (</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>                race <span class="kw">IN</span> (<span class="st">'black'</span>, <span class="st">'native'</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>                <span class="kw">OR</span> ethnicity <span class="op">=</span> <span class="st">'Hispanic'</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">OR</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>            age <span class="kw">BETWEEN</span> <span class="dv">18</span> <span class="kw">AND</span> <span class="dv">70</span> <span class="kw">AND</span> <span class="fu">CAST</span>(bmi_value <span class="kw">AS</span> <span class="dt">numeric</span>) <span class="op">&gt;=</span> <span class="dv">23</span> <span class="kw">AND</span> race <span class="op">=</span> <span class="st">'asian'</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> temp_result_criteria;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 37%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 6%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">patient_id</th>
<th style="text-align: left;">birthdate</th>
<th style="text-align: left;">deathdate</th>
<th style="text-align: left;">race</th>
<th style="text-align: left;">ethnicity</th>
<th style="text-align: left;">gender</th>
<th style="text-align: left;">bmi_value</th>
<th style="text-align: right;">age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0001049f-9248-47fe-b479-ea80eb51ce4a</td>
<td style="text-align: left;">1958-12-02</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">27.6</td>
<td style="text-align: right;">65</td>
</tr>
<tr class="even">
<td style="text-align: left;">00019dce-e502-4272-82d2-d1c280f74150</td>
<td style="text-align: left;">1968-04-20</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">29.4</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0001ae39-67c6-443c-81e4-e835ab4f6a9b</td>
<td style="text-align: left;">1914-07-28</td>
<td style="text-align: left;">1956-01-31</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">29.2</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="even">
<td style="text-align: left;">00037885-87aa-4086-aa89-f56ddf5d30e0</td>
<td style="text-align: left;">1958-07-25</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">30.2</td>
<td style="text-align: right;">65</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0006bd25-4d45-41ce-9285-c02d38d57c4d</td>
<td style="text-align: left;">1960-09-15</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">27.6</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="even">
<td style="text-align: left;">0007ad27-973e-4cd5-8d46-b636c85bfa84</td>
<td style="text-align: left;">1984-01-13</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">37.3</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0007ddd2-3913-44e4-bfd4-6806ed72eeda</td>
<td style="text-align: left;">1980-05-29</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">30.1</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="even">
<td style="text-align: left;">000c35f5-35b4-4b7d-84f3-b022e01f7462</td>
<td style="text-align: left;">1954-09-06</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">30.0</td>
<td style="text-align: right;">69</td>
</tr>
<tr class="odd">
<td style="text-align: left;">000d7164-c253-4258-966e-81c61cce1c2c</td>
<td style="text-align: left;">1962-07-04</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">30.4</td>
<td style="text-align: right;">61</td>
</tr>
<tr class="even">
<td style="text-align: left;">000edc09-fcfa-4978-bb34-463db6887f62</td>
<td style="text-align: left;">1976-11-22</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">nonhispanic</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">30.6</td>
<td style="text-align: right;">47</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="only-type-1-and-type-2-diabetes-patients" class="level3">
<h3 class="anchored" data-anchor-id="only-type-1-and-type-2-diabetes-patients">3) Only Type 1 and Type 2 Diabetes patients</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> patient, description</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> conditions</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="fu">LOWER</span>(description) <span class="kw">LIKE</span> <span class="st">'%diabetes%'</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">AND</span> (<span class="fu">LOWER</span>(description) <span class="kw">LIKE</span> <span class="st">'%type 1%'</span> <span class="kw">OR</span> <span class="fu">LOWER</span>(description) <span class="kw">LIKE</span> <span class="st">'%type 2%'</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 31%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">patient</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">000c35f5-35b4-4b7d-84f3-b022e01f7462</td>
<td style="text-align: left;">Neuropathy due to type 2 diabetes mellitus (disorder)</td>
</tr>
<tr class="even">
<td style="text-align: left;">000c4fd7-1fcf-4172-a59f-87553c0558a2</td>
<td style="text-align: left;">Neuropathy due to type 2 diabetes mellitus (disorder)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">001b34da-747c-4526-a83d-b2b9494e4d6b</td>
<td style="text-align: left;">Microalbuminuria due to type 2 diabetes mellitus (disorder)</td>
</tr>
<tr class="even">
<td style="text-align: left;">001b34da-747c-4526-a83d-b2b9494e4d6b</td>
<td style="text-align: left;">Neuropathy due to type 2 diabetes mellitus (disorder)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">001b34da-747c-4526-a83d-b2b9494e4d6b</td>
<td style="text-align: left;">Proteinuria due to type 2 diabetes mellitus (disorder)</td>
</tr>
<tr class="even">
<td style="text-align: left;">0034224d-ff47-4cc3-8c9c-3f01de6582c8</td>
<td style="text-align: left;">Neuropathy due to type 2 diabetes mellitus (disorder)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">00365a81-bbf8-4273-8e93-510c34e4226c</td>
<td style="text-align: left;">Neuropathy due to type 2 diabetes mellitus (disorder)</td>
</tr>
<tr class="even">
<td style="text-align: left;">00365a81-bbf8-4273-8e93-510c34e4226c</td>
<td style="text-align: left;">Nonproliferative diabetic retinopathy due to type 2 diabetes mellitus (disorder)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">0041c5a8-b963-4033-8d9e-d4136fdabe0c</td>
<td style="text-align: left;">Neuropathy due to type 2 diabetes mellitus (disorder)</td>
</tr>
<tr class="even">
<td style="text-align: left;">0042fd95-cb1b-4fc2-8235-b44c11b095b2</td>
<td style="text-align: left;">Neuropathy due to type 2 diabetes mellitus (disorder)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TEMPORARY</span> <span class="kw">TABLE</span> temp_result_diabetes <span class="kw">AS</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> C.<span class="op">*</span>, TRC.<span class="op">*</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> conditions C</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> temp_result_criteria TRC <span class="kw">ON</span> C.patient <span class="op">=</span> TRC.patient_id</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="fu">LOWER</span>(C.description) <span class="kw">LIKE</span> <span class="st">'%diabetes%'</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">AND</span> (<span class="fu">LOWER</span>(C.description) <span class="kw">LIKE</span> <span class="st">'%type 1%'</span> <span class="kw">OR</span> <span class="fu">LOWER</span>(C.description) <span class="kw">LIKE</span> <span class="st">'%type 2%'</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-output.var="diabetes_patients">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> temp_result_diabetes;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="glucose-levels" class="level3">
<h3 class="anchored" data-anchor-id="glucose-levels">4) Glucose levels</h3>
<p>There appears to be a distinction between two types of glucose measurements that might have been conducted for diabetic patients. Additionally, a noteworthy observation is the potential mix-up between descriptions and codes, highlighting the need for careful consideration and validation in this context.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> description, code, units, <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> measurement_count</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> observations</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="fu">LOWER</span>(description) <span class="kw">LIKE</span> <span class="st">'%glucose%'</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> description, code, units;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<colgroup>
<col style="width: 55%">
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">description</th>
<th style="text-align: left;">code</th>
<th style="text-align: left;">units</th>
<th style="text-align: right;">measurement_count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Glucose</td>
<td style="text-align: left;">2339-0</td>
<td style="text-align: left;">mg/dL</td>
<td style="text-align: right;">107354</td>
</tr>
<tr class="even">
<td style="text-align: left;">Glucose</td>
<td style="text-align: left;">2345-7</td>
<td style="text-align: left;">mg/dL</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Glucose [Mass/volume] in Serum or Plasma</td>
<td style="text-align: left;">2345-7</td>
<td style="text-align: left;">mg/dL</td>
<td style="text-align: right;">218848</td>
</tr>
<tr class="even">
<td style="text-align: left;">Glucose [Mass/volume] in Urine by Test strip</td>
<td style="text-align: left;">5792-7</td>
<td style="text-align: left;">mg/dL</td>
<td style="text-align: right;">13389</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Glucose [Presence] in Urine by Test strip</td>
<td style="text-align: left;">25428-4</td>
<td style="text-align: left;">{nominal}</td>
<td style="text-align: right;">13389</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Drop the diabetes_glucose temporary table</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- DROP TABLE IF EXISTS diabetes_glucose;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Furthermore, it is noteworthy that the units of the measurements are presented in mg/dL. Consequently, a conversion was necessary to express these measurements as a percentage (%). This conversion was achieved using the following formula:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- selecting the glucose levels for patients in diabetes_glucose</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- adding a "hba1c_percentage" to diabetes_glucose with calculated values</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TEMPORARY</span> <span class="kw">TABLE</span> diabetes_glucose <span class="kw">AS</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> O.<span class="op">*</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- calculating the percentage</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    ((O.<span class="fu">value</span>:<span class="ch">:numeric</span>) <span class="op">/</span> <span class="fl">28.7</span>) <span class="op">+</span> <span class="fl">46.7</span> <span class="kw">AS</span> hba1c_percentage</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> observations O</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> temp_result_diabetes TD <span class="kw">ON</span> O.patient <span class="op">=</span> TD.patient_id</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> O.code <span class="kw">IN</span> (<span class="st">'2339-0'</span>, <span class="st">'2345-7'</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-output.var="diabetes_glucose">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> diabetes_glucose;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="questions" class="level2">
<h2 class="anchored" data-anchor-id="questions">Questions</h2>
<section id="number-of-patients-meeting-inclusion-criteria" class="level3">
<h3 class="anchored" data-anchor-id="number-of-patients-meeting-inclusion-criteria">1. Number of patients meeting inclusion criteria</h3>
<p>The number of patients meeting the inclusion criteria is estimates around 2,106 patients.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="kw">DISTINCT</span> patient_id) <span class="kw">AS</span> patient_count</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> temp_result_diabetes;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">patient_count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2106</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-is-the-percentage-of-patients-with-hba1c-7" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-percentage-of-patients-with-hba1c-7">2. What is the percentage of patients with HbA1c &gt; 7%?</h3>
<p>Among diabetic patients, multiple encounters and observations have been documented, indicating elevated HbA1c levels exceeding 7%. The query sought to identify the latest measurement for each distinct patient. The outcome reveals a consistent pattern wherein all patients exhibit HbA1c levels surpassing the 7% threshold. This uniformity underscores the prevalence of elevated HbA1c levels within the diabetic patient population.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- percentage of patients with HbA1c &gt; 7%, considering the latest date</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">COUNT</span>(<span class="cf">CASE</span> <span class="cf">WHEN</span> hba1c_percentage <span class="op">&gt;</span> <span class="dv">7</span> <span class="cf">THEN</span> <span class="dv">1</span> <span class="cf">END</span>) <span class="op">*</span> <span class="fl">100.0</span> <span class="op">/</span> <span class="fu">COUNT</span>(<span class="kw">DISTINCT</span> patient) <span class="kw">AS</span> percentage</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- selecting the latest date for each patient</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        patient,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">MAX</span>(<span class="dt">date</span>) <span class="kw">AS</span> latest_date,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">MAX</span>(hba1c_percentage) <span class="kw">AS</span> hba1c_percentage</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> diabetes_glucose</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">GROUP</span> <span class="kw">BY</span> patient</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> latest_data;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">100</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="group-by-age-18-30-30-40-40-50-and-above-60" class="level3">
<h3 class="anchored" data-anchor-id="group-by-age-18-30-30-40-40-50-and-above-60">3. Group by age (18-30; 30 – 40; 40-50 and above 60)</h3>
<div class="cell" data-output.var="diabetes_age_range">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- grouping patients by age ranges and storing into the R table</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> age <span class="kw">BETWEEN</span> <span class="dv">18</span> <span class="kw">AND</span> <span class="dv">30</span> <span class="cf">THEN</span> <span class="st">'18-30'</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> age <span class="kw">BETWEEN</span> <span class="dv">31</span> <span class="kw">AND</span> <span class="dv">40</span> <span class="cf">THEN</span> <span class="st">'30-40'</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> age <span class="kw">BETWEEN</span> <span class="dv">41</span> <span class="kw">AND</span> <span class="dv">50</span> <span class="cf">THEN</span> <span class="st">'40-50'</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> age <span class="op">&gt;=</span> <span class="dv">61</span> <span class="cf">THEN</span> <span class="st">'above 60'</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">ELSE</span> <span class="st">'Unknown'</span>  <span class="co">--  cases where age doesn't fall into any range</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">END</span> <span class="kw">AS</span> age_range,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">COUNT</span>(<span class="kw">DISTINCT</span> patient_id) <span class="kw">AS</span> patient_count</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> temp_result_diabetes</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> age_range</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> age_range;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loading ggplot2 library</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># convering 'patient_count' to numeric</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>diabetes_age_range<span class="sc">$</span>patient_count <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(diabetes_age_range<span class="sc">$</span>patient_count)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># checking for and handle missing values</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>diabetes_age_range <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(diabetes_age_range)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ensuring 'age_range' is a Factor</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>diabetes_age_range<span class="sc">$</span>age_range <span class="ot">&lt;-</span> <span class="fu">factor</span>(diabetes_age_range<span class="sc">$</span>age_range)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a bar plot with adjusted y-axis scale</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diabetes_age_range, <span class="fu">aes</span>(<span class="at">x =</span> age_range, <span class="at">y =</span> patient_count, <span class="at">fill =</span> age_range)) <span class="sc">+</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">'identity'</span>) <span class="sc">+</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Diabetic Patients Grouped by Age Ranges'</span>, <span class="at">x =</span> <span class="st">'Age Range'</span>, <span class="at">y =</span> <span class="st">'Patient Count'</span>) <span class="sc">+</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">max</span>(diabetes_age_range<span class="sc">$</span>patient_count), <span class="at">by =</span> <span class="dv">50</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="HW1_Aizhan_Uteubayeva_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In the visualization of the results, a predominant portion of the patient population falls into the age group above 60 years old, indicating a significant representation of elderly individuals. Conversely, the age range of 18 to 30 exhibits a smaller patient population. Notably, a considerable portion of the data lacks recorded age information, constituting the second-largest group and contributing to the “Unknown” category. This emphasizes the need for more comprehensive age data recording within the dataset.</p>
</section>
<section id="group-by-race" class="level3">
<h3 class="anchored" data-anchor-id="group-by-race">4. Group by race</h3>
<div class="cell" data-output.var="diabetes_race">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Group patients by race and count</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    race,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">COUNT</span>(<span class="kw">DISTINCT</span> patient_id) <span class="kw">AS</span> patient_count</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> temp_result_diabetes</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> race</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> race;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loading ggplot2 library</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># converting 'patient_count' to numeric</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>diabetes_race<span class="sc">$</span>patient_count <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(diabetes_race<span class="sc">$</span>patient_count)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># checking for and handle missing values</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>diabetes_race <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(diabetes_race)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ensuring 'race' is a factor</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>diabetes_race<span class="sc">$</span>race <span class="ot">&lt;-</span> <span class="fu">factor</span>(diabetes_race<span class="sc">$</span>race)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a bar plot with adjusted y-axis scale</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diabetes_race, <span class="fu">aes</span>(<span class="at">x =</span> race, <span class="at">y =</span> patient_count, <span class="at">fill =</span> race)) <span class="sc">+</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">'identity'</span>) <span class="sc">+</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Diabetic patients Grouped by Race'</span>, <span class="at">x =</span> <span class="st">'Race'</span>, <span class="at">y =</span> <span class="st">'Patient Count'</span>) <span class="sc">+</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">max</span>(diabetes_race<span class="sc">$</span>patient_count), <span class="at">by =</span> <span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="HW1_Aizhan_Uteubayeva_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Upon visualizing the race distribution among diabetic patients, a substantial majority is identified as White, indicating a significant representation within the diabetic population. The distribution among Asian and Black patients appears to be roughly comparable, with moderate prevalence. Additionally, there are smaller recorded populations for Native and other racial categories. This observation underscores the diversity within the diabetic patient population, with varied racial representations across different groups.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>